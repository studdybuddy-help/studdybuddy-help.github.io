(()=>{var m=[null,"#00faff","#ff0055","#00ff6e","#ffb300","#8e00ff","#ffee00","#ff3030"];function u(e){let t=document.body;if(typeof e=="string"){localStorage.setItem("trixelTheme",e),t.classList.remove("theme-eclipse","theme-wave","theme-rose","theme-classic","theme-custom"),t.classList.add(`theme-${e}`);let c={rose:["#ffa6fc","#ff94e0","#ff76d8","#ff59c7","#f000b8","#db008b","#b10065"],classic:["#f438ff","#ffe038","#fe8d0f","#3877ff","#0dc2ff","#00f867","#ff002b"],wave:["#1a74e2","#2b8cf0","#3fa0ef","#55b9fb","#6bd0ff","#46a9ff","#148aff"],eclipse:["#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff","#ffffff"],heat:["#d82935","#ff5a3d","#ff7847","#ff944c","#ffb347","#ffd100","#ffe34d"]};m.splice(0,m.length,null,...c[e])}else if(typeof e=="object"){let{cssVars:c,pieceColors:n}=e;localStorage.setItem("trixelTheme","custom"),localStorage.setItem("trixelCustomTheme",JSON.stringify(e)),Object.entries(c).forEach(([r,l])=>{document.documentElement.style.setProperty(`--${r}`,l)}),m.splice(0,m.length,null,...n),t.className="theme-custom";return}}function h(){document.querySelectorAll("[data-i18n]").forEach(e=>{let t=e.getAttribute("data-i18n"),c=chrome.i18n.getMessage(t);c&&(e.textContent=c)})}document.addEventListener("DOMContentLoaded",h);function y(){let t=JSON.parse(localStorage.getItem("trixelCustomTheme")||"{}").cssVars||{};for(let[c,n]of Object.entries(t))document.documentElement.style.setProperty(`--${c}`,n)}document.addEventListener("DOMContentLoaded",()=>{function e(o,s){let f=document.getElementById(o);if(!f){console.warn("Missing element:",o);return}f.value=s}let t=localStorage.getItem("trixelTheme")||"classic";document.body.classList.add(`theme-${t}`),t==="custom"&&y();let c=document.getElementById("custom-theme-form"),n=document.getElementById("save-custom-theme");function r(){let o=JSON.parse(localStorage.getItem("trixelCustomTheme")||"{}"),s=o.cssVars||{},f={"bg-color":"#121212","accent-color":"#ffffff","text-color":"#ffffff","secondary-text-color":"#bbbbbb","border-color":"#333333","box-glow":"0px 0px 10px #00bcd4","text-glow":"0px 0px 0px #ffffff","font-family":"Orbitron, sans-serif","cell-glow":"none","editor-bg":"#1e1e1e"},i={"bg-color":"custom-bg","accent-color":"custom-accent","text-color":"custom-primary-text-color","secondary-text-color":"custom-secondary-text-color","border-color":"custom-border-color","box-glow":"custom-box-glow","text-glow":"custom-text-glow","font-family":"custom-font","cell-glow":"custom-cell-glow","editor-bg":"custom-editor-bg"};for(let[a,d]of Object.entries(i))e(d,s[a]||f[a]);let g=["#f438ff","#ffe038","#fe8d0f","#3877ff","#0dc2ff","#00f867","#ff002b"],b=o.pieceColors||g;["t","j","l","o","s","z","i"].forEach((a,d)=>{e(`color-${a}`,b[d])}),document.getElementById("custom-theme-form").style.display="grid"}let l=document.querySelector(`.theme-btn[data-theme="${t}"]`);l&&l.classList.add("selected"),document.querySelectorAll(".theme-btn").forEach(o=>{o.addEventListener("click",()=>{let s=o.dataset.theme;l&&l.classList.remove("selected"),o.classList.add("selected"),l=o,s==="custom"?r():(c.style.display="none",u(s),document.body.className=`theme-${s}`)})}),n.addEventListener("click",()=>{let o={"bg-color":document.getElementById("custom-bg").value,"accent-color":document.getElementById("custom-accent").value,"text-color":document.getElementById("custom-primary-text-color").value,"secondary-text-color":document.getElementById("custom-secondary-text-color").value,"border-color":document.getElementById("custom-border-color").value,"box-glow":document.getElementById("custom-box-glow").value,"text-glow":document.getElementById("custom-text-glow").value,"font-family":document.getElementById("custom-font").value,"cell-glow":document.getElementById("custom-cell-glow").value,"editor-bg":document.getElementById("custom-editor-bg").value},s=["t","j","l","o","s","z","i"].map(f=>document.getElementById(`color-${f}`).value);u({cssVars:o,pieceColors:s}),document.body.className="theme-custom"}),document.getElementById("cancel-theme").addEventListener("click",()=>{window.location.href="index.html"}),t==="custom"?r():c.style.display="none"});})();
